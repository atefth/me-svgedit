{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{\"5K0Q\":function(e,t,o){\"use strict\";o.r(t),o.d(t,\"default\",function(){return s});var n=o(\"20ZU\");const r=\"eyedropper\",i=function(){var e=Object(n.a)(function*(e){let t;const o=e.configObj.pref(\"lang\");try{t=yield function(e){switch(e){case\"./locale/en.js\":return Promise.resolve().then(function(){return a});case\"./locale/fr.js\":return Promise.resolve().then(function(){return l});case\"./locale/zh-CN.js\":return Promise.resolve().then(function(){return c});default:return new Promise(function(t,o){(\"function\"==typeof queueMicrotask?queueMicrotask:setTimeout)(o.bind(null,new Error(\"Unknown variable dynamic import: \"+e)))})}}(\"./locale/\".concat(o,\".js\"))}catch(e){console.warn(\"Missing translation (\".concat(o,\") for \").concat(r,\" - using 'en'\")),t=yield Promise.resolve().then(function(){return a})}e.i18next.addResourceBundle(o,r,t.default)});return function(t){return e.apply(this,arguments)}}();var s={name:r,init(){var e=this;return Object(n.a)(function*(){const t=e,{svgCanvas:o}=t;yield i(t);const{ChangeElementCommand:n}=o.history,s={fillPaint:\"red\",fillOpacity:1,strokePaint:\"black\",strokeOpacity:1,strokeWidth:5,strokeDashArray:null,opacity:1,strokeLinecap:\"butt\",strokeLinejoin:\"miter\"},{$id:a}=o,l=e=>{if(\"eyedropper\"===o.getMode())return;const t=a(\"tool_eyedropper\");let n=null;e.multiselected||!e.elems[0]||[\"svg\",\"g\",\"use\"].includes(e.elems[0].nodeName)?t.classList.add(\"disabled\"):(n=e.elems[0],t.classList.remove(\"disabled\"),s.fillPaint=n.getAttribute(\"fill\")||\"black\",s.fillOpacity=n.getAttribute(\"fill-opacity\")||1,s.strokePaint=n.getAttribute(\"stroke\"),s.strokeOpacity=n.getAttribute(\"stroke-opacity\")||1,s.strokeWidth=n.getAttribute(\"stroke-width\"),s.strokeDashArray=n.getAttribute(\"stroke-dasharray\"),s.strokeLinecap=n.getAttribute(\"stroke-linecap\"),s.strokeLinejoin=n.getAttribute(\"stroke-linejoin\"),s.opacity=n.getAttribute(\"opacity\")||1)};return{name:t.i18next.t(\"\".concat(r,\":name\")),callback(){const e=\"\".concat(r,\":buttons.0.title\"),t=\"\".concat(r,\":buttons.0.key\"),n='\\n        <se-button id=\"tool_eyedropper\" title=\"'.concat(e,'\" src=\"eye_dropper.svg\" shortcut=').concat(t,\"></se-button>\\n        \");o.insertChildAtIndex(a(\"tools_left\"),n,12),a(\"tool_eyedropper\").addEventListener(\"click\",()=>{this.leftPanel.updateLeftPanel(\"tool_eyedropper\")&&o.setMode(\"eyedropper\")})},selectedChanged:l,elementChanged:l,mouseDown(e){if(\"eyedropper\"===o.getMode()){const r=e.event,{target:i}=r;if(![\"svg\",\"g\",\"use\"].includes(i.nodeName)){const e={},r=function(t,o,n){e[o]=t.getAttribute(o),t.setAttribute(o,n)};s.fillPaint&&r(i,\"fill\",s.fillPaint),s.fillOpacity&&r(i,\"fill-opacity\",s.fillOpacity),s.strokePaint&&r(i,\"stroke\",s.strokePaint),s.strokeOpacity&&r(i,\"stroke-opacity\",s.strokeOpacity),s.strokeWidth&&r(i,\"stroke-width\",s.strokeWidth),s.strokeDashArray&&r(i,\"stroke-dasharray\",s.strokeDashArray),s.opacity&&r(i,\"opacity\",s.opacity),s.strokeLinecap&&r(i,\"stroke-linecap\",s.strokeLinecap),s.strokeLinejoin&&r(i,\"stroke-linejoin\",s.strokeLinejoin),t=new n(i,e),o.undoMgr.addCommandToHistory(t)}}var t}}})()}},a=Object.freeze({__proto__:null,default:{name:\"eyedropper\",buttons:[{title:\"Eye Dropper Tool\",key:\"I\"}]}}),l=Object.freeze({__proto__:null,default:{name:\"pipette\",buttons:[{title:\"Outil pipette\",key:\"I\"}]}}),c=Object.freeze({__proto__:null,default:{name:\"\\u6ef4\\u7ba1\",buttons:[{title:\"\\u6ef4\\u7ba1\\u5de5\\u5177\",key:\"I\"}]}})}}]);","name":"4.080f63d863dd18bef894.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[4],{\n\n/***/ \"5K0Q\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return t; });\n/* harmony import */ var C_Projects_lib_workspace_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"20ZU\");\n\n\n/**\n * @file ext-eyedropper.js\n *\n * @license MIT\n *\n * @copyright 2010 Jeff Schiller\n * @copyright 2021 OptimistikSAS\n *\n */\nconst e = \"eyedropper\",\n      loadExtensionTranslation = /*#__PURE__*/function () {\n  var _ref = Object(C_Projects_lib_workspace_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(function* (t) {\n    let i;\n    const a = t.configObj.pref(\"lang\");\n\n    try {\n      i = yield function __variableDynamicImportRuntime0__(e) {\n        switch (e) {\n          case \"./locale/en.js\":\n            return Promise.resolve().then(function () {\n              return o;\n            });\n\n          case \"./locale/fr.js\":\n            return Promise.resolve().then(function () {\n              return r;\n            });\n\n          case \"./locale/zh-CN.js\":\n            return Promise.resolve().then(function () {\n              return n;\n            });\n\n          default:\n            return new Promise(function (t, o) {\n              (\"function\" == typeof queueMicrotask ? queueMicrotask : setTimeout)(o.bind(null, new Error(\"Unknown variable dynamic import: \" + e)));\n            });\n        }\n      }(\"./locale/\".concat(a, \".js\"));\n    } catch (t) {\n      console.warn(\"Missing translation (\".concat(a, \") for \").concat(e, \" - using 'en'\")), i = yield Promise.resolve().then(function () {\n        return o;\n      });\n    }\n\n    t.i18next.addResourceBundle(a, e, i.default);\n  });\n\n  return function loadExtensionTranslation(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar t = {\n  name: e,\n\n  init() {\n    var _this = this;\n\n    return Object(C_Projects_lib_workspace_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(function* () {\n      const t = _this,\n            {\n        svgCanvas: o\n      } = t;\n      yield loadExtensionTranslation(t);\n\n      const {\n        ChangeElementCommand: r\n      } = o.history,\n            n = {\n        fillPaint: \"red\",\n        fillOpacity: 1,\n        strokePaint: \"black\",\n        strokeOpacity: 1,\n        strokeWidth: 5,\n        strokeDashArray: null,\n        opacity: 1,\n        strokeLinecap: \"butt\",\n        strokeLinejoin: \"miter\"\n      },\n            {\n        $id: i\n      } = o,\n            getStyle = e => {\n        if (\"eyedropper\" === o.getMode()) return;\n        const t = i(\"tool_eyedropper\");\n        let r = null;\n        e.multiselected || !e.elems[0] || [\"svg\", \"g\", \"use\"].includes(e.elems[0].nodeName) ? t.classList.add(\"disabled\") : (r = e.elems[0], t.classList.remove(\"disabled\"), n.fillPaint = r.getAttribute(\"fill\") || \"black\", n.fillOpacity = r.getAttribute(\"fill-opacity\") || 1, n.strokePaint = r.getAttribute(\"stroke\"), n.strokeOpacity = r.getAttribute(\"stroke-opacity\") || 1, n.strokeWidth = r.getAttribute(\"stroke-width\"), n.strokeDashArray = r.getAttribute(\"stroke-dasharray\"), n.strokeLinecap = r.getAttribute(\"stroke-linecap\"), n.strokeLinejoin = r.getAttribute(\"stroke-linejoin\"), n.opacity = r.getAttribute(\"opacity\") || 1);\n      };\n\n      return {\n        name: t.i18next.t(\"\".concat(e, \":name\")),\n\n        callback() {\n          const t = \"\".concat(e, \":buttons.0.title\"),\n                r = \"\".concat(e, \":buttons.0.key\"),\n                n = '\\n        <se-button id=\"tool_eyedropper\" title=\"'.concat(t, '\" src=\"eye_dropper.svg\" shortcut=').concat(r, \"></se-button>\\n        \");\n          o.insertChildAtIndex(i(\"tools_left\"), n, 12), i(\"tool_eyedropper\").addEventListener(\"click\", () => {\n            this.leftPanel.updateLeftPanel(\"tool_eyedropper\") && o.setMode(\"eyedropper\");\n          });\n        },\n\n        selectedChanged: getStyle,\n        elementChanged: getStyle,\n\n        mouseDown(e) {\n          if (\"eyedropper\" === o.getMode()) {\n            const i = e.event,\n                  {\n              target: a\n            } = i;\n\n            if (![\"svg\", \"g\", \"use\"].includes(a.nodeName)) {\n              const e = {},\n                    change = function (t, o, r) {\n                e[o] = t.getAttribute(o), t.setAttribute(o, r);\n              };\n\n              n.fillPaint && change(a, \"fill\", n.fillPaint), n.fillOpacity && change(a, \"fill-opacity\", n.fillOpacity), n.strokePaint && change(a, \"stroke\", n.strokePaint), n.strokeOpacity && change(a, \"stroke-opacity\", n.strokeOpacity), n.strokeWidth && change(a, \"stroke-width\", n.strokeWidth), n.strokeDashArray && change(a, \"stroke-dasharray\", n.strokeDashArray), n.opacity && change(a, \"opacity\", n.opacity), n.strokeLinecap && change(a, \"stroke-linecap\", n.strokeLinecap), n.strokeLinejoin && change(a, \"stroke-linejoin\", n.strokeLinejoin), t = new r(a, e), o.undoMgr.addCommandToHistory(t);\n            }\n          }\n\n          var t;\n        }\n\n      };\n    })();\n  }\n\n},\n    o = Object.freeze({\n  __proto__: null,\n  default: {\n    name: \"eyedropper\",\n    buttons: [{\n      title: \"Eye Dropper Tool\",\n      key: \"I\"\n    }]\n  }\n}),\n    r = Object.freeze({\n  __proto__: null,\n  default: {\n    name: \"pipette\",\n    buttons: [{\n      title: \"Outil pipette\",\n      key: \"I\"\n    }]\n  }\n}),\n    n = Object.freeze({\n  __proto__: null,\n  default: {\n    name: \"滴管\",\n    buttons: [{\n      title: \"滴管工具\",\n      key: \"I\"\n    }]\n  }\n});\n //# sourceMappingURL=ext-eyedropper.js.map\n\n/***/ })\n\n}]);","inputSourceMap":null}