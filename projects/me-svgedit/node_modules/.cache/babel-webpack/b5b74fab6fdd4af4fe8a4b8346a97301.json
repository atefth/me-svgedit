{"ast":null,"code":"import _asyncToGenerator from \"C:/Projects/lib-workspace/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\n/**\n * @file ext-shapes.js\n *\n * @license MIT\n *\n * @copyright 2010 Christian Tzurcanu, 2010 Alexis Deveria\n *\n */\nconst e = \"shapes\",\n      loadExtensionTranslation = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (t) {\n    let n;\n    const l = t.configObj.pref(\"lang\");\n\n    try {\n      n = yield function __variableDynamicImportRuntime0__(e) {\n        switch (e) {\n          case \"./locale/en.js\":\n            return Promise.resolve().then(function () {\n              return a;\n            });\n\n          case \"./locale/fr.js\":\n            return Promise.resolve().then(function () {\n              return o;\n            });\n\n          case \"./locale/zh-CN.js\":\n            return Promise.resolve().then(function () {\n              return s;\n            });\n\n          default:\n            return new Promise(function (t, a) {\n              (\"function\" == typeof queueMicrotask ? queueMicrotask : setTimeout)(a.bind(null, new Error(\"Unknown variable dynamic import: \" + e)));\n            });\n        }\n      }(\"./locale/\".concat(l, \".js\"));\n    } catch (t) {\n      console.warn(\"Missing translation (\".concat(l, \") for \").concat(e, \" - using 'en'\")), n = yield Promise.resolve().then(function () {\n        return a;\n      });\n    }\n\n    t.i18next.addResourceBundle(l, e, n.default);\n  });\n\n  return function loadExtensionTranslation(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar t = {\n  name: e,\n\n  init() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const t = _this,\n            a = t.svgCanvas,\n            {\n        $id: o\n      } = a,\n            s = a.getSvgRoot();\n      let n = {};\n      yield loadExtensionTranslation(t);\n      const l = \"shapelib\",\n            r = {};\n      let i, c, u;\n      return {\n        callback() {\n          if (null === o(\"tool_shapelib\")) {\n            const s = '\\n          <se-explorerbutton id=\"tool_shapelib\" title=\"'.concat(t.i18next.t(\"\".concat(e, \":buttons.0.title\")), '\" lib=\"./extensions/ext-shapes/shapelib/\"\\n          src=\"shapelib.svg\"></se-explorerbutton>\\n          ');\n            a.insertChildAtIndex(o(\"tools_left\"), s, 9), o(\"tool_shapelib\").addEventListener(\"click\", () => {\n              this.leftPanel.updateLeftPanel(\"tool_shapelib\") && a.setMode(l);\n            });\n          }\n        },\n\n        mouseDown(e) {\n          if (a.getMode() !== l) return;\n          const t = document.getElementById(\"tool_shapelib\").dataset.draw;\n          c = e.start_x;\n          const o = c;\n          u = e.start_y;\n          const s = u,\n                m = a.getStyle();\n          return r.x = e.event.clientX, r.y = e.event.clientY, i = a.addSVGElementsFromJson({\n            element: \"path\",\n            curStyles: !0,\n            attr: {\n              d: t,\n              id: a.getNextId(),\n              opacity: m.opacity / 2,\n              style: \"pointer-events:none\"\n            }\n          }), i.setAttribute(\"transform\", \"translate(\" + o + \",\" + s + \") scale(0.005) translate(\" + -o + \",\" + -s + \")\"), a.recalculateDimensions(i), n = i.getBBox(), {\n            started: !0\n          };\n        },\n\n        mouseMove(e) {\n          if (a.getMode() !== l) return;\n          const t = a.getZoom(),\n                o = e.event,\n                r = e.mouse_x / t,\n                m = e.mouse_y / t,\n                h = i.transform.baseVal,\n                b = i.getBBox(),\n                d = b.x,\n                p = b.y,\n                f = (Math.min(c, r), Math.min(u, m), Math.abs(r - c)),\n                g = Math.abs(m - u);\n\n          let _ = f / n.width || 1,\n              y = g / n.height || 1,\n              w = 0;\n\n          r < c && (w = n.width);\n          let v = 0;\n          m < u && (v = n.height);\n          const M = s.createSVGTransform(),\n                j = s.createSVGTransform(),\n                x = s.createSVGTransform();\n\n          if (M.setTranslate(-(d + w), -(p + v)), !o.shiftKey) {\n            const e = Math.min(Math.abs(_), Math.abs(y));\n            _ = e * (_ < 0 ? -1 : 1), y = e * (y < 0 ? -1 : 1);\n          }\n\n          j.setScale(_, y), x.setTranslate(d + w, p + v), h.appendItem(x), h.appendItem(j), h.appendItem(M), a.recalculateDimensions(i), n = i.getBBox();\n        },\n\n        mouseUp(e) {\n          if (a.getMode() !== l) return;\n          return {\n            keep: e.event.clientX !== r.x && e.event.clientY !== r.y,\n            element: i,\n            started: !1\n          };\n        }\n\n      };\n    })();\n  }\n\n},\n    a = Object.freeze({\n  __proto__: null,\n  default: {\n    loading: \"Loading...\",\n    categories: {\n      basic: \"Basic\",\n      object: \"Objects\",\n      symbol: \"Symbols\",\n      arrow: \"Arrows\",\n      flowchart: \"Flowchart\",\n      animal: \"Animals\",\n      game: \"Cards & Chess\",\n      dialog_balloon: \"Dialog balloons\",\n      electronics: \"Electronics\",\n      math: \"Mathematical\",\n      music: \"Music\",\n      misc: \"Miscellaneous\",\n      raphael_1: \"raphaeljs.com set 1\",\n      raphael_2: \"raphaeljs.com set 2\"\n    },\n    buttons: [{\n      title: \"Shape library\"\n    }]\n  }\n}),\n    o = Object.freeze({\n  __proto__: null,\n  default: {\n    loading: \"Chargement...\",\n    categories: {\n      basic: \"Basique\",\n      object: \"Objets\",\n      symbol: \"Symboles\",\n      arrow: \"Flèches\",\n      flowchart: \"Flowchart\",\n      animal: \"Animaux\",\n      game: \"Cartes & Echecs\",\n      dialog_balloon: \"Dialog balloons\",\n      electronics: \"Electronique\",\n      math: \"Mathematiques\",\n      music: \"Musique\",\n      misc: \"Divers\",\n      raphael_1: \"raphaeljs.com set 1\",\n      raphael_2: \"raphaeljs.com set 2\"\n    },\n    buttons: [{\n      title: \"Bibliothèque d'images\"\n    }]\n  }\n}),\n    s = Object.freeze({\n  __proto__: null,\n  default: {\n    loading: \"正在加载...\",\n    categories: {\n      basic: \"基本\",\n      object: \"对象\",\n      symbol: \"符号\",\n      arrow: \"箭头\",\n      flowchart: \"工作流\",\n      animal: \"动物\",\n      game: \"棋牌\",\n      dialog_balloon: \"会话框\",\n      electronics: \"电子\",\n      math: \"数学\",\n      music: \"音乐\",\n      misc: \"其他\",\n      raphael_1: \"raphaeljs.com 集合 1\",\n      raphael_2: \"raphaeljs.com 集合 2\"\n    },\n    buttons: [{\n      title: \"图元库\"\n    }]\n  }\n});\nexport { t as default }; //# sourceMappingURL=ext-shapes.js.map","map":{"version":3,"sources":["C:/Projects/lib-workspace/node_modules/svgedit/dist/editor/extensions/ext-shapes/ext-shapes.js"],"names":["e","loadExtensionTranslation","t","n","l","configObj","pref","__variableDynamicImportRuntime0__","Promise","resolve","then","a","o","s","queueMicrotask","setTimeout","bind","Error","concat","console","warn","i18next","addResourceBundle","default","name","init","svgCanvas","$id","getSvgRoot","r","i","c","u","callback","insertChildAtIndex","addEventListener","leftPanel","updateLeftPanel","setMode","mouseDown","getMode","document","getElementById","dataset","draw","start_x","start_y","m","getStyle","x","event","clientX","y","clientY","addSVGElementsFromJson","element","curStyles","attr","d","id","getNextId","opacity","style","setAttribute","recalculateDimensions","getBBox","started","mouseMove","getZoom","mouse_x","mouse_y","h","transform","baseVal","b","p","f","Math","min","abs","g","_","width","height","w","v","M","createSVGTransform","j","setTranslate","shiftKey","setScale","appendItem","mouseUp","keep","Object","freeze","__proto__","loading","categories","basic","object","symbol","arrow","flowchart","animal","game","dialog_balloon","electronics","math","music","misc","raphael_1","raphael_2","buttons","title"],"mappings":"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","sourcesContent":["/**\n * @file ext-shapes.js\n *\n * @license MIT\n *\n * @copyright 2010 Christian Tzurcanu, 2010 Alexis Deveria\n *\n */\nconst e=\"shapes\",loadExtensionTranslation=async function(t){let n;const l=t.configObj.pref(\"lang\");try{n=await function __variableDynamicImportRuntime0__(e){switch(e){case\"./locale/en.js\":return Promise.resolve().then((function(){return a}));case\"./locale/fr.js\":return Promise.resolve().then((function(){return o}));case\"./locale/zh-CN.js\":return Promise.resolve().then((function(){return s}));default:return new Promise((function(t,a){(\"function\"==typeof queueMicrotask?queueMicrotask:setTimeout)(a.bind(null,new Error(\"Unknown variable dynamic import: \"+e)))}))}}(\"./locale/\".concat(l,\".js\"))}catch(t){console.warn(\"Missing translation (\".concat(l,\") for \").concat(e,\" - using 'en'\")),n=await Promise.resolve().then((function(){return a}))}t.i18next.addResourceBundle(l,e,n.default)};var t={name:e,async init(){const t=this,a=t.svgCanvas,{$id:o}=a,s=a.getSvgRoot();let n={};await loadExtensionTranslation(t);const l=\"shapelib\",r={};let i,c,u;return{callback(){if(null===o(\"tool_shapelib\")){const s='\\n          <se-explorerbutton id=\"tool_shapelib\" title=\"'.concat(t.i18next.t(\"\".concat(e,\":buttons.0.title\")),'\" lib=\"./extensions/ext-shapes/shapelib/\"\\n          src=\"shapelib.svg\"></se-explorerbutton>\\n          ');a.insertChildAtIndex(o(\"tools_left\"),s,9),o(\"tool_shapelib\").addEventListener(\"click\",(()=>{this.leftPanel.updateLeftPanel(\"tool_shapelib\")&&a.setMode(l)}))}},mouseDown(e){if(a.getMode()!==l)return;const t=document.getElementById(\"tool_shapelib\").dataset.draw;c=e.start_x;const o=c;u=e.start_y;const s=u,m=a.getStyle();return r.x=e.event.clientX,r.y=e.event.clientY,i=a.addSVGElementsFromJson({element:\"path\",curStyles:!0,attr:{d:t,id:a.getNextId(),opacity:m.opacity/2,style:\"pointer-events:none\"}}),i.setAttribute(\"transform\",\"translate(\"+o+\",\"+s+\") scale(0.005) translate(\"+-o+\",\"+-s+\")\"),a.recalculateDimensions(i),n=i.getBBox(),{started:!0}},mouseMove(e){if(a.getMode()!==l)return;const t=a.getZoom(),o=e.event,r=e.mouse_x/t,m=e.mouse_y/t,h=i.transform.baseVal,b=i.getBBox(),d=b.x,p=b.y,f=(Math.min(c,r),Math.min(u,m),Math.abs(r-c)),g=Math.abs(m-u);let _=f/n.width||1,y=g/n.height||1,w=0;r<c&&(w=n.width);let v=0;m<u&&(v=n.height);const M=s.createSVGTransform(),j=s.createSVGTransform(),x=s.createSVGTransform();if(M.setTranslate(-(d+w),-(p+v)),!o.shiftKey){const e=Math.min(Math.abs(_),Math.abs(y));_=e*(_<0?-1:1),y=e*(y<0?-1:1)}j.setScale(_,y),x.setTranslate(d+w,p+v),h.appendItem(x),h.appendItem(j),h.appendItem(M),a.recalculateDimensions(i),n=i.getBBox()},mouseUp(e){if(a.getMode()!==l)return;return{keep:e.event.clientX!==r.x&&e.event.clientY!==r.y,element:i,started:!1}}}}},a=Object.freeze({__proto__:null,default:{loading:\"Loading...\",categories:{basic:\"Basic\",object:\"Objects\",symbol:\"Symbols\",arrow:\"Arrows\",flowchart:\"Flowchart\",animal:\"Animals\",game:\"Cards & Chess\",dialog_balloon:\"Dialog balloons\",electronics:\"Electronics\",math:\"Mathematical\",music:\"Music\",misc:\"Miscellaneous\",raphael_1:\"raphaeljs.com set 1\",raphael_2:\"raphaeljs.com set 2\"},buttons:[{title:\"Shape library\"}]}}),o=Object.freeze({__proto__:null,default:{loading:\"Chargement...\",categories:{basic:\"Basique\",object:\"Objets\",symbol:\"Symboles\",arrow:\"Flèches\",flowchart:\"Flowchart\",animal:\"Animaux\",game:\"Cartes & Echecs\",dialog_balloon:\"Dialog balloons\",electronics:\"Electronique\",math:\"Mathematiques\",music:\"Musique\",misc:\"Divers\",raphael_1:\"raphaeljs.com set 1\",raphael_2:\"raphaeljs.com set 2\"},buttons:[{title:\"Bibliothèque d'images\"}]}}),s=Object.freeze({__proto__:null,default:{loading:\"正在加载...\",categories:{basic:\"基本\",object:\"对象\",symbol:\"符号\",arrow:\"箭头\",flowchart:\"工作流\",animal:\"动物\",game:\"棋牌\",dialog_balloon:\"会话框\",electronics:\"电子\",math:\"数学\",music:\"音乐\",misc:\"其他\",raphael_1:\"raphaeljs.com 集合 1\",raphael_2:\"raphaeljs.com 集合 2\"},buttons:[{title:\"图元库\"}]}});export{t as default};\n//# sourceMappingURL=ext-shapes.js.map\n"]},"metadata":{},"sourceType":"module"}