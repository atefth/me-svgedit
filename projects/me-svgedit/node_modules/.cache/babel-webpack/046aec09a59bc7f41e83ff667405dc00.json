{"ast":null,"code":"import _asyncToGenerator from \"C:/Projects/lib-workspace/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\n/**\n * @file ext-shapes.js\n *\n * @license MIT\n *\n * @copyright 2010 Christian Tzurcanu, 2010 Alexis Deveria\n *\n */\nconst e = \"shapes\",\n      loadExtensionTranslation = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (t) {\n    let n;\n    const l = t.configObj.pref(\"lang\");\n\n    try {\n      n = yield function __variableDynamicImportRuntime0__(e) {\n        switch (e) {\n          case \"./locale/en.js\":\n            return Promise.resolve().then(function () {\n              return a;\n            });\n\n          case \"./locale/fr.js\":\n            return Promise.resolve().then(function () {\n              return o;\n            });\n\n          case \"./locale/zh-CN.js\":\n            return Promise.resolve().then(function () {\n              return s;\n            });\n\n          default:\n            return new Promise(function (t, a) {\n              (\"function\" == typeof queueMicrotask ? queueMicrotask : setTimeout)(a.bind(null, new Error(\"Unknown variable dynamic import: \" + e)));\n            });\n        }\n      }(\"./locale/\".concat(l, \".js\"));\n    } catch (t) {\n      console.warn(\"Missing translation (\".concat(l, \") for \").concat(e, \" - using 'en'\")), n = yield Promise.resolve().then(function () {\n        return a;\n      });\n    }\n\n    t.i18next.addResourceBundle(l, e, n.default);\n  });\n\n  return function loadExtensionTranslation(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar t = {\n  name: e,\n\n  init() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const t = _this,\n            a = t.svgCanvas,\n            {\n        $id: o\n      } = a,\n            s = a.getSvgRoot();\n      let n = {};\n      yield loadExtensionTranslation(t);\n      const l = \"shapelib\",\n            r = {};\n      let i, c, u;\n      return {\n        callback() {\n          if (null === o(\"tool_shapelib\")) {\n            const s = '\\n          <se-explorerbutton id=\"tool_shapelib\" title=\"'.concat(t.i18next.t(\"\".concat(e, \":buttons.0.title\")), '\" lib=\"./extensions/ext-shapes/shapelib/\"\\n          src=\"shapelib.svg\"></se-explorerbutton>\\n          ');\n            a.insertChildAtIndex(o(\"tools_left\"), s, 9), o(\"tool_shapelib\").addEventListener(\"click\", () => {\n              this.leftPanel.updateLeftPanel(\"tool_shapelib\") && a.setMode(l);\n            });\n          }\n        },\n\n        mouseDown(e) {\n          if (a.getMode() !== l) return;\n          const t = document.getElementById(\"tool_shapelib\").dataset.draw;\n          c = e.start_x;\n          const o = c;\n          u = e.start_y;\n          const s = u,\n                m = a.getStyle();\n          return r.x = e.event.clientX, r.y = e.event.clientY, i = a.addSVGElementsFromJson({\n            element: \"path\",\n            curStyles: !0,\n            attr: {\n              d: t,\n              id: a.getNextId(),\n              opacity: m.opacity / 2,\n              style: \"pointer-events:none\"\n            }\n          }), i.setAttribute(\"transform\", \"translate(\" + o + \",\" + s + \") scale(0.005) translate(\" + -o + \",\" + -s + \")\"), a.recalculateDimensions(i), n = i.getBBox(), {\n            started: !0\n          };\n        },\n\n        mouseMove(e) {\n          if (a.getMode() !== l) return;\n          const t = a.getZoom(),\n                o = e.event,\n                r = e.mouse_x / t,\n                m = e.mouse_y / t,\n                h = i.transform.baseVal,\n                b = i.getBBox(),\n                d = b.x,\n                p = b.y,\n                f = (Math.min(c, r), Math.min(u, m), Math.abs(r - c)),\n                g = Math.abs(m - u);\n\n          let _ = f / n.width || 1,\n              y = g / n.height || 1,\n              w = 0;\n\n          r < c && (w = n.width);\n          let v = 0;\n          m < u && (v = n.height);\n          const M = s.createSVGTransform(),\n                j = s.createSVGTransform(),\n                x = s.createSVGTransform();\n\n          if (M.setTranslate(-(d + w), -(p + v)), !o.shiftKey) {\n            const e = Math.min(Math.abs(_), Math.abs(y));\n            _ = e * (_ < 0 ? -1 : 1), y = e * (y < 0 ? -1 : 1);\n          }\n\n          j.setScale(_, y), x.setTranslate(d + w, p + v), h.appendItem(x), h.appendItem(j), h.appendItem(M), a.recalculateDimensions(i), n = i.getBBox();\n        },\n\n        mouseUp(e) {\n          if (a.getMode() !== l) return;\n          return {\n            keep: e.event.clientX !== r.x && e.event.clientY !== r.y,\n            element: i,\n            started: !1\n          };\n        }\n\n      };\n    })();\n  }\n\n},\n    a = Object.freeze({\n  __proto__: null,\n  default: {\n    loading: \"Loading...\",\n    categories: {\n      basic: \"Basic\",\n      object: \"Objects\",\n      symbol: \"Symbols\",\n      arrow: \"Arrows\",\n      flowchart: \"Flowchart\",\n      animal: \"Animals\",\n      game: \"Cards & Chess\",\n      dialog_balloon: \"Dialog balloons\",\n      electronics: \"Electronics\",\n      math: \"Mathematical\",\n      music: \"Music\",\n      misc: \"Miscellaneous\",\n      raphael_1: \"raphaeljs.com set 1\",\n      raphael_2: \"raphaeljs.com set 2\"\n    },\n    buttons: [{\n      title: \"Shape library\"\n    }]\n  }\n}),\n    o = Object.freeze({\n  __proto__: null,\n  default: {\n    loading: \"Chargement...\",\n    categories: {\n      basic: \"Basique\",\n      object: \"Objets\",\n      symbol: \"Symboles\",\n      arrow: \"Flèches\",\n      flowchart: \"Flowchart\",\n      animal: \"Animaux\",\n      game: \"Cartes & Echecs\",\n      dialog_balloon: \"Dialog balloons\",\n      electronics: \"Electronique\",\n      math: \"Mathematiques\",\n      music: \"Musique\",\n      misc: \"Divers\",\n      raphael_1: \"raphaeljs.com set 1\",\n      raphael_2: \"raphaeljs.com set 2\"\n    },\n    buttons: [{\n      title: \"Bibliothèque d'images\"\n    }]\n  }\n}),\n    s = Object.freeze({\n  __proto__: null,\n  default: {\n    loading: \"正在加载...\",\n    categories: {\n      basic: \"基本\",\n      object: \"对象\",\n      symbol: \"符号\",\n      arrow: \"箭头\",\n      flowchart: \"工作流\",\n      animal: \"动物\",\n      game: \"棋牌\",\n      dialog_balloon: \"会话框\",\n      electronics: \"电子\",\n      math: \"数学\",\n      music: \"音乐\",\n      misc: \"其他\",\n      raphael_1: \"raphaeljs.com 集合 1\",\n      raphael_2: \"raphaeljs.com 集合 2\"\n    },\n    buttons: [{\n      title: \"图元库\"\n    }]\n  }\n});\nexport { t as default }; //# sourceMappingURL=ext-shapes.js.map","map":null,"metadata":{},"sourceType":"module"}